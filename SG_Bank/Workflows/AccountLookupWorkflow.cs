using SG_Bank.BLL;
using SG_Bank.Models.Responses;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SG_Bank.Workflows
{
    public class AccountLookupWorkflow
    {
        public void Execute()
        {
            AccountManager manager = AccountManagerFactory.Create();

            string accountNumber = ConsoleIO.GetStringFromUser("Lookup an Account\n" +
                                                               "-----------------------------\n\n" +
                                                               "Default Accounts:\n" +
                                                               "11111, Free\n" +
                                                               "22222, Basic\n" +
                                                               "33333, Premium\n\n" +
                                                               "Enter an account number: ", 1, 5, false, false, true, false, false, false, true);
            AccountLookupResponse response = manager.LookupAccount(accountNumber);

            if (response.Success)
            {
                ConsoleIO.DisplayAccountDetails(response.Account);
            }
            else
            {
                ConsoleIO.DisplayToUser("The following error occurred: " + response.Message, false);
            }
            ConsoleIO.DisplayToUser("\nPress any key to continue...", true);
        }
    }
}
